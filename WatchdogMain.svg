<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="889px" preserveAspectRatio="none" style="width:437px;height:889px;" version="1.1" viewBox="0 0 437 889" width="437px" zoomAndPan="magnify"><defs><filter height="300%" id="f20rxf3itakiq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[9a528e6905840515624eb80340063a30]
class WatchdogMain--><rect fill="#FEFECE" filter="url(#f20rxf3itakiq)" height="48" id="WatchdogMain" style="stroke: #A80036; stroke-width: 1.5;" width="124" x="154" y="8"/><ellipse cx="169" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M171.9688,29.6406 Q171.3906,29.9375 170.75,30.0781 Q170.1094,30.2344 169.4063,30.2344 Q166.9063,30.2344 165.5781,28.5938 Q164.2656,26.9375 164.2656,23.8125 Q164.2656,20.6875 165.5781,19.0313 Q166.9063,17.375 169.4063,17.375 Q170.1094,17.375 170.75,17.5313 Q171.4063,17.6875 171.9688,17.9844 L171.9688,20.7031 Q171.3438,20.125 170.75,19.8594 Q170.1563,19.5781 169.5313,19.5781 Q168.1875,19.5781 167.5,20.6563 Q166.8125,21.7188 166.8125,23.8125 Q166.8125,25.9063 167.5,26.9844 Q168.1875,28.0469 169.5313,28.0469 Q170.1563,28.0469 170.75,27.7813 Q171.3438,27.5 171.9688,26.9219 L171.9688,29.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="92" x="183" y="28.1543">WatchdogMain</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="155" x2="277" y1="40" y2="40"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="155" x2="277" y1="48" y2="48"/><!--MD5=[74026ca718864ade72d8a12fd1b4e377]
class Watchdog--><rect fill="#FEFECE" filter="url(#f20rxf3itakiq)" height="214.4609" id="Watchdog" style="stroke: #A80036; stroke-width: 1.5;" width="420" x="6" y="116"/><ellipse cx="180.25" cy="132" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M183.2188,137.6406 Q182.6406,137.9375 182,138.0781 Q181.3594,138.2344 180.6563,138.2344 Q178.1563,138.2344 176.8281,136.5938 Q175.5156,134.9375 175.5156,131.8125 Q175.5156,128.6875 176.8281,127.0313 Q178.1563,125.375 180.6563,125.375 Q181.3594,125.375 182,125.5313 Q182.6563,125.6875 183.2188,125.9844 L183.2188,128.7031 Q182.5938,128.125 182,127.8594 Q181.4063,127.5781 180.7813,127.5781 Q179.4375,127.5781 178.75,128.6563 Q178.0625,129.7188 178.0625,131.8125 Q178.0625,133.9063 178.75,134.9844 Q179.4375,136.0469 180.7813,136.0469 Q181.4063,136.0469 182,135.7813 Q182.5938,135.5 183.2188,134.9219 L183.2188,137.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="200.75" y="136.1543">Watchdog</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="425" y1="148" y2="148"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="156"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="26" y="162.2104">bool m_Running</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="168.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="98" x="26" y="175.0151">bool m_AutoScan</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="181.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="92" x="26" y="187.8198">bool m_Verbose</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="194.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="26" y="200.6245">milliseconds m_ScanPeriod</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="207.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="113" x="26" y="213.4292">function m_Callback</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="7" x2="425" y1="220.0234" y2="220.0234"/><ellipse cx="17" cy="231.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="244" x="26" y="234.2339">Watchdog( scanPeriod, autoScan, verbose)</text><ellipse cx="17" cy="243.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="149" x="26" y="247.0386">void setCallback( function)</text><ellipse cx="17" cy="256.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="26" y="259.8433">void setPolicy( policy)</text><ellipse cx="17" cy="269.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="26" y="272.6479">void monitor()</text><ellipse cx="17" cy="282.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="26" y="285.4526">void quiesce()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="30" y="298.2573"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="304.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="26" y="311.062">void scanHeartbeats()</text><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="14" y="317.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="394" x="26" y="323.8667">void doCallbacks( actualName, processID, threadID, event, hbLength)</text><!--MD5=[27b5ee5f1dbbde347ed284f899bf7850]
class EKG--><rect fill="#FEFECE" filter="url(#f20rxf3itakiq)" height="214.4609" id="EKG" style="stroke: #A80036; stroke-width: 1.5;" width="176" x="128" y="390"/><ellipse cx="199.75" cy="406" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M202.7188,411.6406 Q202.1406,411.9375 201.5,412.0781 Q200.8594,412.2344 200.1563,412.2344 Q197.6563,412.2344 196.3281,410.5938 Q195.0156,408.9375 195.0156,405.8125 Q195.0156,402.6875 196.3281,401.0313 Q197.6563,399.375 200.1563,399.375 Q200.8594,399.375 201.5,399.5313 Q202.1563,399.6875 202.7188,399.9844 L202.7188,402.7031 Q202.0938,402.125 201.5,401.8594 Q200.9063,401.5781 200.2813,401.5781 Q198.9375,401.5781 198.25,402.6563 Q197.5625,403.7188 197.5625,405.8125 Q197.5625,407.9063 198.25,408.9844 Q198.9375,410.0469 200.2813,410.0469 Q200.9063,410.0469 201.5,409.7813 Q202.0938,409.5 202.7188,408.9219 L202.7188,411.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="24" x="220.25" y="410.1543">EKG</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="129" x2="303" y1="422" y2="422"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="136" y="430"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="121" x="148" y="436.2104">string m_ActualName</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="136" y="442.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="114" x="148" y="449.0151">string m_UserName</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="136" y="455.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="148" y="461.8198">pid_t m_ProcessID</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="136" y="468.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="148" y="474.6245">pid_t m_ThreadID</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="136" y="481.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="148" y="487.4292">mapped_region m_Region</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="129" x2="303" y1="494.0234" y2="494.0234"/><ellipse cx="139" cy="505.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="102" x="148" y="508.2339">EKG( actualName)</text><ellipse cx="139" cy="517.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="148" y="521.0386">bool isAlive()</text><ellipse cx="139" cy="530.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="148" y="533.8433">bool isNormal()</text><ellipse cx="139" cy="543.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="118" x="148" y="546.6479">milliseconds length()</text><ellipse cx="139" cy="556.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="148" y="559.4526">string actualName()</text><ellipse cx="139" cy="569.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="150" x="148" y="572.2573">milliseconds normalLimit()</text><ellipse cx="139" cy="581.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="96" x="148" y="585.062">pid_t processID()</text><ellipse cx="139" cy="594.6563" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="87" x="148" y="597.8667">pid_t threadID()</text><!--MD5=[5588a39ae170b77f50776c4d9116093e]
class Heartbeat--><rect fill="#FEFECE" filter="url(#f20rxf3itakiq)" height="214.4609" id="Heartbeat" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="61.5" y="664"/><ellipse cx="179.75" cy="680" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M182.7188,685.6406 Q182.1406,685.9375 181.5,686.0781 Q180.8594,686.2344 180.1563,686.2344 Q177.6563,686.2344 176.3281,684.5938 Q175.0156,682.9375 175.0156,679.8125 Q175.0156,676.6875 176.3281,675.0313 Q177.6563,673.375 180.1563,673.375 Q180.8594,673.375 181.5,673.5313 Q182.1563,673.6875 182.7188,673.9844 L182.7188,676.7031 Q182.0938,676.125 181.5,675.8594 Q180.9063,675.5781 180.2813,675.5781 Q178.9375,675.5781 178.25,676.6563 Q177.5625,677.7188 177.5625,679.8125 Q177.5625,681.9063 178.25,682.9844 Q178.9375,684.0469 180.2813,684.0469 Q180.9063,684.0469 181.5,683.7813 Q182.0938,683.5 182.7188,682.9219 L182.7188,685.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="64" x="200.25" y="684.1543">Heartbeat</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="62.5" x2="369.5" y1="696" y2="696"/><ellipse cx="72.5" cy="707" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="81.5" y="710.2104">milliseconds m_NormalLimit</text><ellipse cx="72.5" cy="719.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="168" x="81.5" y="723.0151">milliseconds m_AbsoluteLimit</text><ellipse cx="72.5" cy="732.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="106" x="81.5" y="735.8198">time_point m_Beat</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="62.5" x2="369.5" y1="742.4141" y2="742.4141"/><ellipse cx="72.5" cy="753.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="81.5" y="756.6245">void SetCRC( heartbeat)</text><ellipse cx="72.5" cy="766.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="81.5" y="769.4292">bool isCRCOK( heartbeat)</text><ellipse cx="72.5" cy="779.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="283" x="81.5" y="782.2339">string makeActualName( procName, threadName)</text><ellipse cx="72.5" cy="791.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="215" x="81.5" y="795.0386">string extractUserName( actualName)</text><ellipse cx="72.5" cy="804.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="81.5" y="807.8433">string extractProcName( actualName)</text><ellipse cx="72.5" cy="817.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="228" x="81.5" y="820.6479">string extractThreadName( actualName)</text><ellipse cx="72.5" cy="830.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="206" x="81.5" y="833.4526">pid_t extractProcessID( actualName)</text><ellipse cx="72.5" cy="843.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="200" x="81.5" y="846.2573">pid_t extractThreadID( actualName)</text><ellipse cx="72.5" cy="855.8516" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="81.5" y="859.062">bool isHeartbeat( name)</text><ellipse cx="72.5" cy="868.6563" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="159" x="81.5" y="871.8667">utin32)t calcCRC( heartbeat)</text><!--MD5=[4ed118a7c9c47b4b2b951d0ee4d84f54]
reverse link WatchdogMain to Watchdog--><path d="M216,69.27 C216,82.84 216,99.02 216,115.71 " fill="none" id="WatchdogMain&lt;-Watchdog" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="216,56.18,212,62.18,216,68.18,220,62.18,216,56.18" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.025" y="75.9851">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.7313" y="105.0534">1</text><!--MD5=[8e71609fa42bdec185f6fdb3b686f276]
reverse link Watchdog to EKG--><path d="M216,343.71 C216,359.04 216,374.65 216,389.74 " fill="none" id="Watchdog&lt;-EKG" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="216,330.33,212,336.33,216,342.33,220,336.33,216,330.33" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.7188" y="350.4593">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.7313" y="379.0854">n</text><!--MD5=[db8a0d5af58c6dc8fb1f9d87dc3a7343]
reverse link EKG to Heartbeat--><path d="M216,617.71 C216,633.04 216,648.65 216,663.74 " fill="none" id="EKG&lt;-Heartbeat" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="216,604.33,212,610.33,216,616.33,220,610.33,216,604.33" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.7188" y="624.4593">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="207.7313" y="653.0854">1</text><!--MD5=[e06a83543d23289999fdc4293b2516b3]
@startuml
class WatchdogMain

class Watchdog {
-bool m_Running
-bool m_AutoScan
-bool m_Verbose
-milliseconds m_ScanPeriod
-function m_Callback

+Watchdog( scanPeriod, autoScan, verbose)
+void setCallback( function)
+void setPolicy( policy)
+void monitor()
+void quiesce()

-void scanHeartbeats()
-void doCallbacks( actualName, processID, threadID, event, hbLength)
}

class EKG {
-string m_ActualName
-string m_UserName
-pid_t m_ProcessID
-pid_t m_ThreadID
-mapped_region m_Region

+EKG( actualName)
+bool isAlive()
+bool isNormal()
+milliseconds length()
+string actualName()
+milliseconds normalLimit()
+pid_t processID()
+pid_t threadID()
}

class Heartbeat {
+milliseconds m_NormalLimit
+milliseconds m_AbsoluteLimit
+time_point m_Beat

+void SetCRC( heartbeat)
+bool isCRCOK( heartbeat)
+string makeActualName( procName, threadName)
+string extractUserName( actualName)
+string extractProcName( actualName)
+string extractThreadName( actualName)
+pid_t extractProcessID( actualName)
+pid_t extractThreadID( actualName)
+bool isHeartbeat( name)
+utin32)t calcCRC( heartbeat)
}
WatchdogMain "1" *- - "1" Watchdog
Watchdog "1" *- - "n" EKG
EKG "1" *- - "1" Heartbeat
@enduml

PlantUML version 1.2020.02(Sun Mar 01 21:22:07 AEDT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.18+10-post-Ubuntu-0ubuntu122.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: AU
--></g></svg>